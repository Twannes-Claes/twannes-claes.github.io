<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DOTS WebGL Build | Twannes Claes</title>

  <!-- Fonts & CSS -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Onest:wght@400;700&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="../css/reset.css" />
  <link rel="stylesheet" href="../css/general.css" />

  <style>
    main {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 80vh;
      text-align: center;
    }

    #unity-container {
      position: relative;
      width: 960px;
      max-width: 100%;
      aspect-ratio: 16 / 9;
      background: #1a1a1a;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.25);
    }

    canvas {
      width: 100%;
      height: 100%;
      display: block;
    }

    .loading {
      color: var(--c-white);
      font-family: 'JetBrains Mono', monospace;
      padding: 2rem;
    }

    nav {
      margin-bottom: 2rem;
    }

    .back {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 2rem;
    }
  </style>
</head>

<body>
  <nav class="container">
    <ul>
      <li><a href="/#projects">Projects</a></li>
      <li><a href="/#about">About me</a></li>
      <li><a href="/#contact">Contact & Links</a></li>
    </ul>
  </nav>

  <main class="container">
    <a class="back link" href="/#projects">‚Üê Back to overview</a>

    <h1 class="project__title">DND WebGL Build</h1>

    <div id="unity-container">
      <div class="loading" id="unity-loading">Loading game...</div>
      <canvas id="unity-canvas" style="display:none"></canvas>
    </div>
  </main>

  <!-- Unity Loader -->
  <script>
    const buildUrl = "../assets/unity-build"; // <--- points to your assets folder
    const loaderUrl = buildUrl + "/Build.loader.js";
    const config = {
      dataUrl: buildUrl + "/Build.data",
      frameworkUrl: buildUrl + "/Build.framework.js",
      codeUrl: buildUrl + "/Build.wasm",
      streamingAssetsUrl: "StreamingAssets",
      companyName: "Twannes Claes",
      productName: "Character Sheet editor",
      productVersion: "1.0",
    };

    const canvas = document.querySelector("#unity-canvas");
    const loading = document.querySelector("#unity-loading");

    const script = document.createElement("script");
    script.src = loaderUrl;
    script.onload = () => {
      createUnityInstance(canvas, config, (progress) => {
        loading.textContent = `Loading ${Math.round(progress * 100)}%`;
      })
        .then(() => {
          loading.style.display = "none";
          canvas.style.display = "block";
        })
        .catch((message) => {
          loading.textContent = "Failed to load: " + message;
        });
    };
    document.body.appendChild(script);
  </script>
</body>

</html>